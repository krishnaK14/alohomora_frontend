(this.webpackJsonpalohomora_frontend=this.webpackJsonpalohomora_frontend||[]).push([[0],{236:function(e,t,a){e.exports=a(432)},302:function(e,t,a){},303:function(e,t,a){},430:function(e,t,a){},431:function(e,t,a){},432:function(e,t,a){"use strict";a.r(t);a(237),a(238);var n=a(0),r=a.n(n),o=a(50),s=a.n(o),c=a(453),i=a(42),l=a(21),u=a(210),m=a(211),d=a(448),p=a(51),h=a(96),f="LOGIN",b="LOGOUT",E=Object(l.combineReducers)({form:d.a,notifs:p.reducer,auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(h.a)(Object(h.a)({},e),{},{authenticated:!0,token:t.payload});case b:return Object(h.a)(Object(h.a)({},e),{},{authenticated:!1,token:null})}return e}});var w=function(e){var t=Object(m.createLogger)(),a=Object(l.applyMiddleware)(u.a,t);return Object(l.compose)(a)(l.createStore)(E,e)}(),v=a(213),g=a.n(v)()(),O=a(25),y=a.n(O),j=a(159),N="http://localhost:8000",S={LOGIN:"".concat(N,"/api/auth/login/"),SIGNUP:"".concat(N,"/api/registration/"),CHANGE_PASSWORD:"".concat(N,"/api/auth/password/change/"),RESET_PASSWORD:"".concat(N,"/api/auth/password/reset/"),RESET_PASSWORD_CONFIRM:"".concat(N,"/api/auth/password/reset/confirm/"),USER_ACTIVATION:"".concat(N,"/api/registration/account-confirm-email/"),USER_PROFILE:"".concat(N,"/rest-auth/user/")},k={PROFILE:"".concat(N,"/alohomora/profile/"),QUESTION:"".concat(N,"/alohomora/question/"),CHECK_ANSWER:"".concat(N,"/alohomora/check_answer"),SELF_USER:"".concat(N,"/alohomora/self_user")};function _(e){return e.auth.token}var q=p.actions.notifSend;function C(e){return{type:f,payload:e}}function P(e){return Object.keys(e).reduce((function(t,a){return"non_field_errors"===a?t._error.push(e[a]):"token"===a?t._error.push("The link is not valid any more."):t[a]=e[a],t}),{_error:[]})}var I=a(12),A=a(13),T=a(15),R=a(14),x=a(452),U=a(442),L=a(450),W=function(e){var t=function(t){Object(T.a)(n,t);var a=Object(R.a)(n);function n(){return Object(I.a)(this,n),a.apply(this,arguments)}return Object(A.a)(n,[{key:"componentWillMount",value:function(){this.checkAuthentication(this.props)}},{key:"componentWillUpdate",value:function(e){this.checkAuthentication(e)}},{key:"checkAuthentication",value:function(e){e.authenticated||this.props.history.push("/login")}},{key:"render",value:function(){return r.a.createElement(e,this.props)}}]),n}(n.Component);return Object(L.a)(Object(i.b)((function(e){return{authenticated:e.auth.authenticated}}))(t))},D=a(444),F=a(443),z=a(451),M=a(28),G=function(e){var t=e.input,a=e.label,n=e.type,o=e.meta,s=o.touched,c=o.error;return r.a.createElement("div",null,r.a.createElement("label",null,a),r.a.createElement("div",null,r.a.createElement("input",Object.assign({className:"form-control"},t,{type:n}))),s&&c&&r.a.createElement("div",{className:"alert alert-danger p-1"},r.a.createElement("small",null,c)))},H=function(e){if(e)return r.a.createElement("div",{className:"alert alert-danger"},e)},K=function(e){Object(T.a)(a,e);var t=Object(R.a)(a);function a(){return Object(I.a)(this,a),t.apply(this,arguments)}return Object(A.a)(a,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.error;return r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("form",{className:"col col-sm-4 card mt-5 p-2",onSubmit:t},r.a.createElement("h4",{className:"text-md-center"},"Please Log In"),r.a.createElement("hr",null),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement(D.a,{name:"email",label:"Email",component:G,type:"text",validate:[Object(M.required)({message:"This field is required."})]})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement(D.a,{name:"password",label:"Password",component:G,type:"password",validate:[Object(M.required)({message:"This field is required."})]})),r.a.createElement("fieldset",{className:"form-group"},H(a),r.a.createElement("button",{action:"submit",className:"btn btn-primary"},"Login")),r.a.createElement("p",null,"Not registered? ",r.a.createElement(z.a,{to:"/signup"},"Signup Here!")),r.a.createElement(z.a,{to:"/reset_password"},"Forgot password?")))}}]),a}(n.Component),Y=Object(F.a)({form:"login",onSubmit:function(e,t,a){var n=S.LOGIN;return y.a.post(n,e).then((function(e){var a=e.data.key;t(C(a)),localStorage.setItem("token",a),g.push("/")})).catch((function(e){var t=P(e.response.data);throw new j.a(t)}))}})(K),B=function(e){Object(T.a)(a,e);var t=Object(R.a)(a);function a(){return Object(I.a)(this,a),t.apply(this,arguments)}return Object(A.a)(a,[{key:"componentWillMount",value:function(){this.props.logoutUser()}},{key:"render",value:function(){return r.a.createElement("h2",null,"Sorry to see you go...")}}]),a}(n.Component),J=Object(i.b)(null,{logoutUser:function(){return localStorage.removeItem("token"),{type:b}}})(B),Q=function(e){Object(T.a)(a,e);var t=Object(R.a)(a);function a(){return Object(I.a)(this,a),t.apply(this,arguments)}return Object(A.a)(a,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit;e.error;return r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("form",{className:"col col-sm-4 card mt-5 p-2",onSubmit:t},r.a.createElement("h4",{className:"text-md-center"},"Sign Up"),r.a.createElement("hr",null),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement(D.a,{name:"email",label:"Email",component:G,type:"text"})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement(D.a,{name:"username",label:"Username",component:G,type:"text",validate:[Object(M.required)({message:"This field is required."})]})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement(D.a,{name:"password1",label:"Password",component:G,type:"password",validate:[Object(M.required)({message:"This field is required."})]})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement(D.a,{name:"password2",label:"Confirm Password",component:G,type:"password",validate:[Object(M.required)({message:"This field is required."})]})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("button",{action:"submit",className:"btn btn-primary"},"Sign Up"))))}}]),a}(n.Component),V=Object(F.a)({form:"signup",validate:function(e){var t={};return e.password1!==e.password2&&(t.password2="Password does not match."),t},onSubmit:function(e,t,a){var n=S.SIGNUP;return y.a.post(n,e).then((function(e){g.push("/signup_done")})).catch((function(e){var t=P(e.response.data);throw new j.a(t)}))}})(Q),X=function(e){Object(T.a)(a,e);var t=Object(R.a)(a);function a(){return Object(I.a)(this,a),t.apply(this,arguments)}return Object(A.a)(a,[{key:"render",value:function(){return r.a.createElement("h3",{className:"mx-5"},"Thanks for your registration, please follow the link sent to your provided email to activate your account.")}}]),a}(n.Component),Z=function(e){Object(T.a)(a,e);var t=Object(R.a)(a);function a(){return Object(I.a)(this,a),t.apply(this,arguments)}return Object(A.a)(a,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.error;return r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("form",{className:"col col-sm-4 card mt-5 p-2",onSubmit:t},r.a.createElement("h4",{className:"text-md-center"},"Please click the button below to activate your account"),r.a.createElement("hr",null),r.a.createElement("fieldset",{className:"form-group"},H(a),r.a.createElement("button",{action:"submit",className:"btn btn-primary"},"Activate"))))}}]),a}(n.Component),$=Object(F.a)({form:"user_account_activation",onSubmit:function(e,t,a){var n=a.match.params.key,r=S.USER_ACTIVATION+n;return y.a.get(r).then((function(e){t(q({message:"Your account has been activated successfully, please log in",kind:"info",dismissAfter:5e3})),g.push("/login")})).catch((function(e){var t=P(e.response.data);throw new j.a(t)}))}})(Z),ee=function(e){Object(T.a)(a,e);var t=Object(R.a)(a);function a(){return Object(I.a)(this,a),t.apply(this,arguments)}return Object(A.a)(a,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.error;return r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("form",{className:"col col-sm-4 card mt-5 p-2",onSubmit:t},r.a.createElement("h4",{className:"text-md-center"},"Change Password"),r.a.createElement("hr",null),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement(D.a,{name:"old_password",label:"Old Password",component:G,type:"password",validate:[Object(M.required)({message:"This field is required."})]})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement(D.a,{name:"new_password1",label:"New Password",component:G,type:"password",validate:[Object(M.required)({message:"This field is required."})]})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement(D.a,{name:"new_password2",label:"Confirm New Password",component:G,type:"password",validate:[Object(M.required)({message:"This field is required."})]})),r.a.createElement("fieldset",{className:"form-group"},H(a),r.a.createElement("button",{action:"submit",className:"btn btn-primary"},"Submit"))))}}]),a}(n.Component),te=Object(F.a)({form:"change_password",onSubmit:function(e,t,a){var n=S.CHANGE_PASSWORD,r=_(w.getState());if(r)return y.a.post(n,e,{headers:{authorization:"Token "+r}}).then((function(e){t(q({message:"Password has been changed successfully",kind:"info",dismissAfter:5e3})),g.push("/profile")})).catch((function(e){var t=P(e.response.data);throw new j.a(t)}))},validate:function(e){var t={};return e.new_password1!==e.new_password2&&(t.new_password2="Password does not match."),t}})(ee),ae=function(e){Object(T.a)(a,e);var t=Object(R.a)(a);function a(){return Object(I.a)(this,a),t.apply(this,arguments)}return Object(A.a)(a,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.error;return r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("form",{className:"col col-sm-4 card mt-5 p-2",onSubmit:t},r.a.createElement("h4",{className:"text-md-center"},"Reset Your Password"),r.a.createElement("hr",null),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement(D.a,{name:"email",label:"Please enter your email",component:G,type:"text",validate:[Object(M.required)({message:"This field is required."})]})),r.a.createElement("fieldset",{className:"form-group"},H(a),r.a.createElement("button",{action:"submit",className:"btn btn-primary"},"Submit"))))}}]),a}(n.Component),ne=Object(F.a)({form:"password_reset",onSubmit:function(e,t,a){var n=S.RESET_PASSWORD;return y.a.post(n,e).then((function(e){g.push("/reset_password_done")})).catch((function(e){var t=P(e.response.data);throw new j.a(t)}))}})(ae),re=function(e){Object(T.a)(a,e);var t=Object(R.a)(a);function a(){return Object(I.a)(this,a),t.apply(this,arguments)}return Object(A.a)(a,[{key:"render",value:function(){return r.a.createElement("h3",{className:"mx-5"},"An password reset email has been sent to your email. Please follow the link to reset your password.")}}]),a}(n.Component),oe=function(e){Object(T.a)(a,e);var t=Object(R.a)(a);function a(){return Object(I.a)(this,a),t.apply(this,arguments)}return Object(A.a)(a,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.error;return r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("form",{className:"col col-sm-4 card mt-5 p-2",onSubmit:t},r.a.createElement("h4",{className:"text-md-center"},"Create New Password"),r.a.createElement("hr",null),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement(D.a,{name:"new_password1",label:"New Password",component:G,type:"password",validate:[Object(M.required)({message:"This field is required."})]})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement(D.a,{name:"new_password2",label:"Confirm New Password",component:G,type:"password",validate:[Object(M.required)({message:"This field is required."})]})),r.a.createElement("fieldset",{className:"form-group"},H(a),r.a.createElement("button",{action:"submit",className:"btn btn-primary"},"Submit"))))}}]),a}(n.Component),se=Object(F.a)({form:"password_reset_confirm",onSubmit:function(e,t,a){var n=a.match.params,r=n.uid,o=n.token,s=S.RESET_PASSWORD_CONFIRM,c=Object.assign(e,{uid:r,token:o});return y.a.post(s,c).then((function(e){t(q({message:"Password has been reset successfully, please log in",kind:"info",dismissAfter:5e3})),g.push("/login")})).catch((function(e){var t=P(e.response.data);throw new j.a(t)}))},validate:function(e){var t={};return e.new_password1!==e.new_password2&&(t.new_password2="Password does not match."),t}})(oe),ce=function(){return r.a.createElement("h2",{className:"mt-2"},"Sorry, the page you are looking for doesn't exist.")},ie=(a(302),a(446)),le=a(447),ue=a(95),me=a(441),de=a(439),pe=a(224),he=a(449),fe=a(440),be=a(433),Ee=(a(303),function(e){Object(T.a)(a,e);var t=Object(R.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).answerChangeHandle=function(e){n.setState({answer:e.target.value})},n.checkAnswer=function(){var e=k.CHECK_ANSWER,t=_(w.getState()),a={authorization:"Token "+t},r=p.actions.notifSend,o=new FormData;o.append("answer",n.state.answer),t&&y()({method:"post",url:e,data:o,headers:a}).then((function(e){n.setState({answer:""}),"Correct"===e.data?(w.dispatch(r({message:"Congratulations! You answer was Right !",kind:"success",dismissAfter:4e3})),g.push("/")):w.dispatch(r({message:"Answer was incorrect",kind:"warning",dismissAfter:2e3}))})).catch((function(e){console.log("error")}))},n.handleKeyPress=function(e){"Enter"===e.key&&n.checkAnswer()},n.state={questionInfo:{},answer:""},n}return Object(A.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.question_on,a=k.QUESTION+t.toString(),n=_(w.getState()),r={authorization:"Token "+n},o=y()({method:"get",url:a,headers:r});n&&y.a.all([o]).then(y.a.spread((function(t){e.setState({questionInfo:t.data})}))).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return r.a.createElement(de.a,{textAlign:"center",text:!0},null!==this.state.questionInfo.image&&r.a.createElement(pe.a,{centered:!0,src:this.state.questionInfo.image,size:"medium"}),""!==this.state.questionInfo.question_text&&r.a.createElement(he.a,{size:"large",textAlign:"center"},this.state.questionInfo.question_text),r.a.createElement(fe.a,{focus:!0,placeholder:"Answer here..",size:"small",className:"answer-input",onChange:this.answerChangeHandle,onKeyPress:this.handleKeyPress,value:this.state.answer}),r.a.createElement(be.a,{positive:!0,onClick:this.checkAnswer},"Check Answer"))}}]),a}(n.Component)),we=function(e){Object(T.a)(a,e);var t=Object(R.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).state={userInfo:{},profileInfo:[],loaded:!1},n}return Object(A.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=k.SELF_USER,a=k.PROFILE,n=_(w.getState()),r={authorization:"Token "+n},o=y()({method:"get",url:t,headers:r}),s=y()({method:"get",url:a,headers:r});n&&y.a.all([o,s]).then(y.a.spread((function(t,a){e.setState({userInfo:t.data,profileInfo:a.data.results,loaded:!0})}))).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return this.state.loaded?r.a.createElement(r.a.Fragment,null,r.a.createElement(ie.a,{as:le.a,animation:"overlay",icon:"labeled",inverted:!0,vertical:!0,visible:!0,width:"wide",direction:"right",style:{width:260}},r.a.createElement(ue.a,{size:"medium",color:"white"},"LeaderBoard"),this.state.profileInfo.map((function(e,t){return r.a.createElement(le.a.Item,{header:!0},t+1,". ",e.user.username,r.a.createElement(ue.a,null,e.question_on))}))),r.a.createElement(ie.a.Pusher,{className:"question-center"},r.a.createElement("div",null,r.a.createElement(Ee,{question_on:this.state.userInfo.question_on})))):r.a.createElement(me.a,{active:!0,size:"large"})}}]),a}(n.Component),ve=(a(430),function(){return r.a.createElement("div",{className:"MainDiv"},r.a.createElement("div",{className:"MainComponents"},r.a.createElement(x.a,null,r.a.createElement(U.a,{exact:!0,path:"/",component:W(we)}),r.a.createElement(U.a,{path:"/login",component:Y}),r.a.createElement(U.a,{path:"/logout",component:J}),r.a.createElement(U.a,{path:"/signup",component:V}),r.a.createElement(U.a,{path:"/account-confirm-email/:key",component:$}),r.a.createElement(U.a,{path:"/signup_done",component:X}),r.a.createElement(U.a,{path:"/reset_password",component:ne}),r.a.createElement(U.a,{path:"/reset_password_done",component:re}),r.a.createElement(U.a,{path:"/reset_password_confirm/:uid/:token/",component:se}),r.a.createElement(U.a,{path:"/change_password",component:W(te)}),r.a.createElement(U.a,{component:ce}))))}),ge=(a(431),function(e){Object(T.a)(a,e);var t=Object(R.a)(a);function a(){return Object(I.a)(this,a),t.apply(this,arguments)}return Object(A.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(p.Notifs,null),r.a.createElement(ve,null))}}]),a}(n.Component)),Oe=localStorage.getItem("token");Oe&&w.dispatch(C(Oe)),s.a.render(r.a.createElement(i.a,{store:w},r.a.createElement(c.a,{history:g},r.a.createElement(ge,null))),document.getElementById("root"))}},[[236,1,2]]]);
//# sourceMappingURL=main.bceb33c1.chunk.js.map